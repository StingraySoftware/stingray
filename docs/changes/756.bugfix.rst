Changed list comprehension to generator expression to reduce memory usage.